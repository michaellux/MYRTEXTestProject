<div class="container">
    <h1>Список сотрудников</h1>
    <form class="form-inline filter-block">
        <span class="glyphicon glyphicon-filter" aria-hidden="true"></span>
        <div class="form-group">
            <input class="form-control" [(ngModel)]="filterDepartment" (input)="filterHandler()" type="text" name="department" value="" placeholder="Отдел" />
        </div>
        <div class="form-group">
            <input class="form-control" [(ngModel)]="filterName" (input)="filterHandler()" type="text" name="name" value="" placeholder="Ф.И.О" />
        </div>
        <div class="form-group">
            <label class="dateLabel" for="birthdayDate">Дата рождения:</label>
            <input class="form-control" [(ngModel)]="filterBirthdayDate" (input)="filterHandler()" type="date" name="birthdayDate" value="" />
        </div>
        <div class="form-group">
            <label class="dateLabel" for="employmentDate">Дата устройства на работу:</label>
            <input class="form-control" [(ngModel)]="filterEmploymentDate" (input)="filterHandler()" type="date" name="employmentDate" value="" />
        </div>
        <div class="form-group">
            <input class="form-control" [(ngModel)]="filterSalary" (input)="filterHandler()" type="number" name="salary" value="" placeholder="Заработная плата" />
        </div>
    </form>
    <table class="table table-striped table-bordered">
        <thead class="table__header">
            <tr class="table__row table__row_header">
                <th class="table__cell table__cell_header" (click)="changeSort('department')">
                    <span class="table__cell_header-sort" [ngClass]="{'table__cell_header-sort_active': activeSortField === 'department'}">
                        <span *ngIf="activeSortDirection === 'asc'">⬆️</span>
                        <span *ngIf="activeSortDirection === 'desc'">⬇️</span>
                    </span>
                    <span class="table__cell_header-content">Отдел</span>
                </th>
                <th class="table__cell table__cell_header" (click)="changeSort('name')">
                    <span class="table__cell_header-sort" [ngClass]="{'table__cell_header-sort_active': activeSortField === 'name'}">
                        <span *ngIf="activeSortDirection === 'asc'">⬆️</span>
                        <span *ngIf="activeSortDirection === 'desc'">⬇️</span>
                    </span>
                    <span class="table__cell_header-content">Ф.И.О</span>
                </th>
                <th class="table__cell table__cell_header" (click)="changeSort('birthdayDate')">
                    <span class="table__cell_header-sort" [ngClass]="{'table__cell_header-sort_active': activeSortField === 'birthdayDate'}">
                        <span *ngIf="activeSortDirection === 'asc'">⬆️</span>
                        <span *ngIf="activeSortDirection === 'desc'">⬇️</span>
                    </span>
                    <span class="table__cell_header-content">Дата рождения</span>
                </th>
                <th class="table__cell table__cell_header" (click)="changeSort('employmentDate')">
                    <span class="table__cell_header-sort" [ngClass]="{'table__cell_header-sort_active': activeSortField === 'employmentDate'}">
                        <span *ngIf="activeSortDirection === 'asc'">⬆️</span>
                        <span *ngIf="activeSortDirection === 'desc'">⬇️</span>
                    </span>
                    <span class="table__cell_header-content">Дата устройства на работу</span>
                </th>
                <th class="table__cell table__cell_header" (click)="changeSort('salary')">
                    <span class="table__cell_header-sort" [ngClass]="{'table__cell_header-sort_active': activeSortField === 'salary'}">
                        <span *ngIf="activeSortDirection === 'asc'">⬆️</span>
                        <span *ngIf="activeSortDirection === 'desc'">⬇️</span>
                    </span>
                    <span class="table__cell_header-content">Заработная плата</span>
                </th>
                <th class="table__cell table__cell_header"></th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let e of filteredEmployee">
                <td>{{e.department}}</td>
                <td>{{e.name}}</td>
                <td>{{e.birthdayDate | date:'dd.MM.yyyy'}}</td>
                <td>{{e.employmentDate | date:'dd.MM.yyyy'}}</td>
                <td>{{e.salary}}</td>
                <td>
                    <button class="btn btn-sm" (click)="add(e)">Создать</button>
                    <button class="btn btn-sm btn-primary" (click)="editProduct(e)">Редактировать</button>
                    <button class="btn btn-sm btn-danger" (click)="delete(e)">Удалить</button>
                </td>
            </tr>

        </tbody>
    </table>
    <p class="message" *ngIf="isLoading">{{loadingMessage}}</p>
    <p class="message" *ngIf="!isLoading && filteredEmployee.length === 0">{{emptyMessage}}</p>
</div>

